{"version":3,"sources":["services/api.js","styles/global.js","compenentes/Upload/styles.js","compenentes/Upload/index.js","compenentes/FileList/style.js","compenentes/FileList/index.js","styles.js","App.js","index.js"],"names":["api","axios","create","baseURL","process","createGlobalStyle","_templateObject","Object","taggedTemplateLiteral","dragActive","css","styles_templateObject","dragReject","_templateObject2","DropContainer","styled","div","attrs","className","_templateObject3","props","isDragActive","isDragReject","messageColors","defualt","error","success","UploadMessage","p","_templateObject4","type","Upload","renderDragMessage","react_default","a","createElement","_this2","this","onUpload","es","accept","onDropAccepted","_ref","getRootProps","getInputProps","assign","Component","Container","ul","style_templateObject","FileInfo","style_templateObject2","Preview","style_templateObject3","src","FileList","files","onDelete","map","uploadedFile","key","id","preview","name","readableSize","url","onClick","uploaded","dist_index_esm","styles","root","width","path","stroke","strokeWidth","value","progress","href","target","rel","index_esm","style","marginRight","size","color","src_styles_templateObject","Content","styles_templateObject2","Footer","styles_templateObject3","App","state","uploadedFiles","handlesUpload","file","uniqueId","filesize","URL","createObjectURL","_this","setState","concat","forEach","processUpload","updateFile","data","objectSpread","FormData","append","post","onUploadProgress","e","parseInt","Math","round","loaded","total","then","response","_id","catch","handleDelete","_callee","regenerator_default","wrap","_context","prev","next","delete","filter","stop","_callee2","_context2","get","sent","revokeObjectURL","styles_Container","Upload_Upload","length","compenentes_FileList","global","ReactDOM","render","StrictMode","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.da2cb302.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n    baseURL: process.env.REACT_APP_API_URL,\r\n})\r\n\r\nexport default api;","import 'react-circular-progressbar/dist/styles.css';\r\nimport {createGlobalStyle} from 'styled-components';\r\nexport default createGlobalStyle`\r\n  \r\n   *{\r\n       margin: 0;\r\n       padding: 0;\r\n       outline: 0;\r\n       box-sizing: border-box;\r\n   }\r\n   body{\r\n       font-family: Arial,Helvetica,sans-serif;\r\n       font-size: 14px;\r\n       background-color: #7159c1;\r\n       text-rendering: optimizeLegibility;\r\n       -webkit-font-smoothing: antialiased;\r\n   } \r\n   html,body,#root{\r\n       height: 100%;\r\n   }\r\n\r\n`;","import styled, {css} from 'styled-components';\r\n\r\nconst dragActive = css`\r\n  \r\n   border-color: #78e5d5;\r\n\r\n`\r\n\r\nconst dragReject = css`\r\n\r\n  border-color: #e57878;\r\n\r\n`\r\n\r\nexport const DropContainer = styled.div.attrs({\r\n    className:\"dropzone\"\r\n})`\r\n\r\n  border: 1px dashed #ddd;\r\n  border-radius: 4px;\r\n  cursor:pointer;\r\n  \r\n  transition: height 0.2s ease;\r\n\r\n  ${props => props.isDragActive && dragActive};\r\n  ${props => props.isDragReject && dragReject};\r\n`\r\n\r\nconst messageColors = {\r\n\r\n  defualt: '#999',\r\n  error: '#e57878',\r\n  success: '#78e5d5'\r\n};\r\n\r\nexport const UploadMessage = styled.p`\r\n\r\n   display: flex;\r\n   color: ${props => messageColors[props.type || 'default']};\r\n   justify-content: center;\r\n   align-items: center;\r\n   padding: 15px 0;\r\n`;","import React, { Component } from 'react'\r\n\r\nimport Dropzone from 'react-dropzone';\r\n\r\nimport {DropContainer,UploadMessage} from './styles';\r\n\r\nexport default class Upload extends Component {\r\n\r\n  renderDragMessage = (isDragActive,isDragReject) => {\r\n  \r\n   if(!isDragActive){\r\n     return <UploadMessage>Arraste arquivos aqui...</UploadMessage>\r\n   }\r\n   if(isDragReject){\r\n    return <UploadMessage type=\"error\">arquivo não suportado</UploadMessage>\r\n   }\r\n   \r\n   return <UploadMessage type=\"success\">solte os arquivos aqui...</UploadMessage>\r\n\r\n  };\r\n\r\n  render() {\r\n    const {onUpload} = this.props;\r\n    return (\r\n      <Dropzone accept=\"image/*\" onDropAccepted={onUpload}>\r\n         {({getRootProps,getInputProps,isDragActive,isDragReject})=>(\r\n          <DropContainer\r\n          {...getRootProps()}\r\n          isDragActive={isDragActive}\r\n          isDragReject={isDragReject}\r\n          >\r\n            <input {...getInputProps()}/>\r\n\r\n            {this.renderDragMessage(isDragActive,isDragReject)}\r\n          </DropContainer>\r\n         )}\r\n      </Dropzone>\r\n    );\r\n  }\r\n}\r\n\r\n/*\r\nfazer isso para funcionar certinho;\r\nimport { CircularProgressbar } from 'react-circular-progressbar';\r\n\r\n\r\ne a propriedade percentage por value:\r\n\r\n strokeWidth={10}\r\n value={60}\r\n*/\r\n","import styled from \"styled-components\";\r\n\r\nexport const Container = styled.ul`\r\n\r\n  margin-top: 20px;\r\n\r\n  li{\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      color: #444;\r\n\r\n      & + li{\r\n         margin-top: 15px;\r\n      }\r\n  }\r\n\r\n`\r\nexport const FileInfo = styled.div`\r\n\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  div{\r\n      display: flex;\r\n      flex-direction: column;\r\n      span{\r\n          font-size: 12px;\r\n          color: #999;\r\n          margin-top:5px;\r\n          button{\r\n              border: 0;\r\n              background: transparent;\r\n              color: #e57878;\r\n              margin-left: 5px;\r\n              cursor: pointer;\r\n          }\r\n      }\r\n  }\r\n\r\n`\r\n\r\nexport const Preview = styled.div`\r\n\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 5px;\r\n  background-image: url(${props => props.src});\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: 50% 50%;\r\n  margin-right: 10px;\r\n\r\n` ","import React from 'react'\r\nimport {MdCheckCircle,MdError,MdLink} from 'react-icons/md';\r\nimport {Container,FileInfo,Preview} from './style';\r\nimport { CircularProgressbar } from 'react-circular-progressbar';\r\n\r\n\r\n\r\nconst FileList = ({files , onDelete}) => (\r\n<Container>\r\n   {files.map(uploadedFile => (\r\n           <li key={uploadedFile.id}>\r\n           <FileInfo>\r\n               <Preview src={uploadedFile.preview}/>\r\n               <div>\r\n                   <strong>{uploadedFile.name}</strong>\r\n                   <span>{uploadedFile.readableSize}{!!uploadedFile.url && (\r\n                       <button onClick={()=> {onDelete(uploadedFile.id)}}>Excluir</button>\r\n                   )}</span>\r\n               </div>\r\n           </FileInfo>\r\n          <div>\r\n              \r\n             {!uploadedFile.uploaded && !uploadedFile.error &&(\r\n                               <CircularProgressbar\r\n                               styles={{\r\n                                   root: {width:24},\r\n                                   path: {stroke:'#7159c1'}\r\n                               }}\r\n                               strokeWidth={10}\r\n                               value={uploadedFile.progress}\r\n                               />\r\n             ) }\r\n              \r\n             {uploadedFile.url && (\r\n            <a href={uploadedFile.url}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            >\r\n            <MdLink style={{marginRight:8}} size={24} color=\"#222\"/>\r\n            </a>\r\n             )}\r\n\r\n              {uploadedFile.uploaded && <MdCheckCircle size={24} color=\"#7835d5\"/>}\r\n              {uploadedFile.error && <MdError size={24} color=\"#e57878\"/>}\r\n          </div>\r\n          </li>\r\n   ))}\r\n</Container>\r\n);\r\n\r\nexport default FileList;\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n\r\n   height: 100%;\r\n   display: flex;\r\n    flex-direction: column;\r\n   justify-content:end;\r\n   align-items:center;\r\n\r\n`\r\n\r\nexport const Content = styled.div`\r\n\r\n    width:100%;\r\n    max-width: 400px;\r\n    margin-left: 20px;\r\n    margin-right: 20px;\r\n    margin-bottom: 35vh;\r\n    background: #fff;\r\n    box-sizing: border-box;\r\n    border-radius: 4px;\r\n    padding: 20px;\r\n    @media (max-width: 500px){\r\n        width:97%;\r\n}\r\n\r\n`\r\n\r\nexport const Footer = styled.div`\r\n\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content:center;\r\n    width:100%;\r\n    background-color: #3c096c;\r\n    padding: 20px;\r\n    h1{\r\n        color: white;\r\n        font-size: 20px;\r\n        text-align: center;\r\n    }\r\n    @media (max-width: 500px){\r\n        h1{\r\n        color: white;\r\n        font-size: 18px;\r\n        text-align: center;\r\n    }\r\n    }\r\n\r\n`","import React, { Component } from 'react';\nimport { uniqueId } from 'lodash';\nimport filesize from 'filesize';\nimport api from './services/api'\nimport GlobalStyle from './styles/global';\nimport Upload from './compenentes/Upload';\nimport FileList from './compenentes/FileList';\nimport { Container , Content, Footer} from './styles.js';\n\n\n \nclass App extends Component{\n  state = {\n    uploadedFiles: [],\n  };\n  \n  async componentDidMount() {\n     const response = await api.get('posts');\n\n     this.setState({\n       uploadedFiles: response.data.map(file => ({\n        id: file._id,\n        name: file.name,\n        readableSize: filesize(file.size),\n        preview: file.url,\n        uploaded: true,\n        url: file.url,\n       }))\n      })\n  }\n\n  handlesUpload = files =>{\n    const uploadedFiles = files.map(file => ({\n      file,\n      id: uniqueId(),\n      name: file.name,\n      readableSize: filesize(file.size),\n      preview: URL.createObjectURL(file),\n      progress:0,\n      uploaded: false,\n      error: false,\n      url: null,\n    }))\n\n    this.setState({\n      uploadedFiles: this.state.uploadedFiles.concat(uploadedFiles)\n    });\n\n    uploadedFiles.forEach(this.processUpload);\n  };\n\n  updateFile = (id,data) => {\n   this.setState({uploadedFiles: this.state.uploadedFiles.map(uploadedFile => {\n     return id === uploadedFile.id ? {...uploadedFile, ...data} : uploadedFile;\n   })})\n  };\n  \n  processUpload = (uploadedFile) => {\n     const data = new FormData();\n\n     data.append('file',uploadedFile.file, uploadedFile.name);\n\n     api.post('posts',data,{\n       onUploadProgress: e => {\n         const progress = parseInt(Math.round((e.loaded * 100) / e.total ));\n         \n         this.updateFile(uploadedFile.id,{\n           progress,\n         })\n       }\n     }).then( response =>{\n       this.updateFile(uploadedFile.id, {\n         uploaded: true,\n         id: response.data._id,\n         url:response.data.url,\n       });\n     }).catch(()=>{\n      this.updateFile(uploadedFile.id, {\n        error: true\n      });\n     })\n  };\n\n  handleDelete = async id => {\n    await api.delete(`posts/${id}`);\n    this.setState({\n      uploadedFiles: this.state.uploadedFiles.filter(file => file.id !== id),\n    })\n  }\n\n   componentWillUnmount() {\n     this.state.uploadedFiles.forEach(file => URL.revokeObjectURL(file.preview));\n   }\n\n  render(){\n    const {uploadedFiles} = this.state;\n    return (\n      < Container>\n      <Content>\n        <Upload onUpload={this.handlesUpload}/>\n        {!!uploadedFiles.length && (\n          <FileList files={uploadedFiles}  onDelete={this.handleDelete}/>\n        )}\n        </Content>\n        <Footer>\n          <h1>©Todos os direitos reservados: Matheus Martinez</h1>\n        </Footer>\n      <GlobalStyle/>\n    </ Container>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}